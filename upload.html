---
layout: default
---

<style type="text/css">input, textarea{width: 75%;}</style>
<div align="center">
<form id="fileupload" name="fileupload" enctype="multipart/form-data" method="post">
  <fieldset>
    <br><br><br>
    <input type="file" name="fileselect" id="fileselect"></input>
    <br><br>
    <input type="text" placeholder="Name of the piece" id="name">
    <br><br>
    <input type="text" placeholder="Price of the piece" id="price">
    <br><br>
    <textarea placeholder="Description of the piece" id="description"></textarea>
    <br><br>
    <textarea placeholder="All the Jewelry Items you used in the piece (SEPARATE BY SPACE AND IN LOWERCASE, i.e. 'coral lapis aquamarine'" id="tags"></textarea>
    <br><br>
    <input id="uploadbutton" type="button" value="Upload Image"/>
  </fieldset>
</form>
</div>
<script type="text/javascript">
  $(function() {
    var file;

    // Set an event listener on the Choose File field.
    $('#fileselect').bind("change", function(e) {
      var files = e.target.files || e.dataTransfer.files;
      // Our file var now holds the selected file
      file = files[0];
    });

    // This function is called when the user clicks on Upload to Parse. It will create the REST API request to upload this image to Parse.
    $('#uploadbutton').click(function() {
      var serverUrl = 'https://api.parse.com/1/files/' + file.name;

      $.ajax({
        type: "POST",
        beforeSend: function(request) {
          request.setRequestHeader("X-Parse-Application-Id", '4xorZh7zv0YjtVvF7bbonr05DAFS2OeXhRsHR8LK');
          request.setRequestHeader("X-Parse-REST-API-Key", 'eYdtAAh7gb6KRULTZP5n232usgCy0YBHUKZMiAL2');
          request.setRequestHeader("Content-Type", file.type);
        },
        url: serverUrl,
        data: file,
        processData: false,
        contentType: false,
        success: function(data) {
          alert("File available at: " + data.url);
          var TestObject = Parse.Object.extend("jewelry");
          var testObject = new TestObject();
          testObject.set("imageurl", data.url);
          testObject.set("name", $("#name").val());
          testObject.set("tags", $("#tags").val());
          testObject.set("price", $("#price").val());
          testObject.set("description", $("#description").val())
          testObject.save(null, {
  success: function(gameScore) {
    // Execute any logic that should take place after the object is saved.
    alert('New object created with objectId: ' + gameScore.id);
  },
  error: function(gameScore, error) {
    // Execute any logic that should take place if the save fails.
    // error is a Parse.Error with an error code and message.
    alert('Failed to create new object, with error code: ' + error.message);
  }
});
        },
        error: function(data) {
          var obj = jQuery.parseJSON(data);
          alert(obj.error);
        }
      });
    });


  });
</script>